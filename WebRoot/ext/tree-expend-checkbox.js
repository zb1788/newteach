Ext.tree.TreeCheckNodeUI=function(){this.checkModel="multiple";this.onlyLeafCheckable=false;Ext.tree.TreeCheckNodeUI.superclass.constructor.apply(this,arguments)};Ext.extend(Ext.tree.TreeCheckNodeUI,Ext.tree.TreeNodeUI,{renderElements:function(F,E,_,$){var D=F.getOwnerTree();this.checkModel=D.checkModel||this.checkModel;this.onlyLeafCheckable=D.onlyLeafCheckable||false;this.indentMarkup=F.parentNode?F.parentNode.ui.getChildIndent():"";var B=(!this.onlyLeafCheckable||E.leaf),G=E.href?E.href:Ext.isGecko?"":"#",H=["<li class=\"x-tree-node\"><div ext:tree-node-id=\"",F.id,"\" class=\"x-tree-node-el x-tree-node-leaf x-unselectable ",E.cls,"\" unselectable=\"on\">","<span class=\"x-tree-node-indent\">",this.indentMarkup,"</span>","<img src=\"",this.emptyIcon,"\" class=\"x-tree-ec-icon x-tree-elbow\" />","<img src=\"",E.icon||this.emptyIcon,"\" class=\"x-tree-node-icon",(E.icon?" x-tree-node-inline-icon":""),(E.iconCls?" "+E.iconCls:""),"\" unselectable=\"on\" />",B?("<input class=\"x-tree-node-cb\" type=\"checkbox\" "+(E.checked?"checked=\"checked\" />":"/>")):"","<a hidefocus=\"on\" class=\"x-tree-node-anchor\" href=\"",G,"\" tabIndex=\"1\" ",E.hrefTarget?" target=\""+E.hrefTarget+"\"":"","><span unselectable=\"on\">",F.text,"</span></a></div>","<ul class=\"x-tree-node-ct\" style=\"display:none;\"></ul>","</li>"].join(""),C;if($!==true&&F.nextSibling&&(C=F.nextSibling.ui.getEl()))this.wrap=Ext.DomHelper.insertHtml("beforeBegin",C,H);else this.wrap=Ext.DomHelper.insertHtml("beforeEnd",_,H);this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var I=this.elNode.childNodes;this.indentNode=I[0];this.ecNode=I[1];this.iconNode=I[2];var A=3;if(B){this.checkbox=I[3];Ext.fly(this.checkbox).on("click",this.check.createDelegate(this,[null]));A++}this.anchor=I[A];this.textNode=I[A].firstChild},check:function(C){var B=this.node,_=B.getOwnerTree();this.checkModel=_.checkModel||this.checkModel;if(C===null)C=this.checkbox.checked;else this.checkbox.checked=C;B.attributes.checked=C;_.fireEvent("check",B,C);if(!this.onlyLeafCheckable&&this.checkModel=="cascade"){var A=B.parentNode;if(A!==null)this.parentCheck(A,C);if(!B.expanded&&!B.childrenRendered)B.expand(false,false,this.childCheck);else this.childCheck(B)}else if(this.checkModel=="single"){var D=_.getChecked();for(var E=0;E<D.length;E++){var $=D[E];if($.id!=B.id){$.getUI().checkbox.checked=false;$.attributes.checked=false;_.fireEvent("check",$,false)}}}},childCheck:function($){var _=$.attributes;if(!_.leaf){var C=$.childNodes,A;for(var B=0;B<C.length;B++){A=C[B].getUI();if(A.checkbox.checked^_.checked)A.check(_.checked)}}},parentCheck:function($,B){var A=$.getUI().checkbox;if(typeof A=="undefined")return;if(!(B^A.checked))return;if(!B&&this.childHasChecked($))return;A.checked=B;$.attributes.checked=B;$.getOwnerTree().fireEvent("check",$,B);var _=$.parentNode;if(_!==null)this.parentCheck(_,B)},childHasChecked:function($){var _=$.childNodes;if(_||_.length>0)for(var A=0;A<_.length;A++)if(_[A].getUI().checkbox.checked)return true;return false},toggleCheck:function(_){var $=this.checkbox;if($){var A=(_===undefined?!$.checked:_);this.check(A)}}})